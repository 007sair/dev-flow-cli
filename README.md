# Dev Flow CLI

**Dev Flow CLI** æ˜¯ä¸€ä¸ªç”¨äºè‡ªåŠ¨åŒ–å›¢é˜Ÿ Git å·¥ä½œæµçš„å‘½ä»¤è¡Œå·¥å…·ã€‚å®ƒæ—¨åœ¨å¸®åŠ©å¼€å‘è€…éµå¾ªâ€œä¸¥æ ¼ç§æœ‰åˆ†æ”¯ + çº¿æ€§å†å²â€çš„è§„èŒƒï¼Œç®€åŒ–æ—¥å¸¸çš„ Git æ“ä½œï¼Œç¡®ä¿ä»£ç åº“çš„æ•´æ´å’Œç‰ˆæœ¬ç®¡ç†çš„è§„èŒƒæ€§ã€‚

## ğŸ“– èƒŒæ™¯

æœ¬é¡¹ç›®åŸºäº [å›¢é˜Ÿ Git å·¥ä½œæµè§„èŒƒ](./docs/å›¢é˜Ÿ%20Git%20å·¥ä½œæµè§„èŒƒæ–‡æ¡£.md) æ„å»ºï¼Œæ ¸å¿ƒåŸåˆ™åŒ…æ‹¬ï¼š

*   **ä¸¥æ ¼ç§æœ‰åˆ†æ”¯**ï¼šä¸ªäººå¼€å‘åˆ†æ”¯ä»…é™æœ¬äººä½¿ç”¨ã€‚
*   **çº¿æ€§å†å² (Linear History)**ï¼šé€šè¿‡ Rebase å’Œ Squash ç­–ç•¥ï¼Œæœç»æ— æ„ä¹‰çš„ Merge Commitã€‚
*   **åŸå­æäº¤**ï¼šä¸€ä¸ªåŠŸèƒ½åœ¨å…¬å…±åˆ†æ”¯ä¸Šä½“ç°ä¸º 1 ä¸ª Commitã€‚
*   **ç‰ˆæœ¬é—­ç¯**ï¼šè‡ªåŠ¨åŒ–å¤„ç†ç‰ˆæœ¬å‘å¸ƒå’Œåˆ†æ”¯æ¸…ç†ã€‚

## ğŸš€ å®‰è£…

### NPM å®‰è£…

ä½ å¯ä»¥é€‰æ‹©å…¨å±€å®‰è£…æˆ–è€…å®‰è£…åˆ°é¡¹ç›®ä¸­ã€‚

**å…¨å±€å®‰è£…**ï¼ˆæ¨èç”¨äºä¸ªäººå¸¸ç”¨å·¥å…·ï¼‰ï¼š
è¿™æ ·ä½ å¯ä»¥åœ¨ä»»ä½•ç›®å½•ä¸‹ç›´æ¥ä½¿ç”¨ `flow` å‘½ä»¤ã€‚

```bash
npm install -g dev-flow-cli
```

**é¡¹ç›®å†…å®‰è£…**ï¼ˆæ¨èç”¨äºå›¢é˜Ÿç»Ÿä¸€è§„èŒƒï¼‰ï¼š
å°†å·¥å…·å®‰è£…ä¸ºé¡¹ç›®çš„å¼€å‘ä¾èµ–ï¼Œç¡®ä¿å›¢é˜Ÿæˆå‘˜ä½¿ç”¨ç›¸åŒç‰ˆæœ¬çš„å·¥å…·ã€‚

```bash
npm install --save-dev dev-flow-cli
```

### æœ¬åœ°å¼€å‘å®‰è£…

å¦‚æœä½ æƒ³å‚ä¸æœ¬é¡¹ç›®å¼€å‘ï¼Œæˆ–è€…è¿›è¡Œæºç è°ƒè¯•ï¼š

1. å…‹éš†ä»“åº“åˆ°æœ¬åœ°ï¼š
   ```bash
   git clone https://github.com/007sair/dev-flow-cli.git
   cd dev-flow-cli
   ```

2. å®‰è£…ä¾èµ–ï¼š
   ```bash
   npm install
   ```

3. é“¾æ¥åˆ°å…¨å±€è¿›è¡Œæµ‹è¯•ï¼š
   ```bash
   npm link
   ```

## ğŸ›  ä½¿ç”¨æŒ‡å—

### å¯åŠ¨æ–¹å¼

**1. å…¨å±€å®‰è£… / æœ¬åœ°å¼€å‘é“¾æ¥å**
ç›´æ¥åœ¨ç»ˆç«¯è¿è¡Œï¼š
```bash
flow
```

**2. é¡¹ç›®å†…å®‰è£… (Local Dependency)**
åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹ä½¿ç”¨ `npx` è¿è¡Œï¼š
```bash
npx flow
```
æˆ–è€…åœ¨ `package.json` çš„ scripts ä¸­æ·»åŠ ï¼š
```json
"scripts": {
  "flow": "flow"
}
```
ç„¶åè¿è¡Œ `npm run flow`ã€‚

### äº¤äº’å¼èœå•

```text
? è¯·é€‰æ‹©å½“å‰å·¥ä½œæµé˜¶æ®µ
> AI æ™ºèƒ½æäº¤      (ç”Ÿæˆ Commit Message)
  ç‰¹æ€§åŒæ­¥         (ä¸ªäººåˆ†æ”¯ -> å…¬å…±ç‰¹æ€§åˆ†æ”¯)
  é¢„å‘å¸ƒ           (ç‰¹æ€§åˆ†æ”¯ -> Release åˆ†æ”¯)
  æ­£å¼å‘å¸ƒ         (Release -> Master)
  AI é…ç½®          (è®¾ç½® API Key ç­‰)
```

### å¸¸ç”¨å‘½ä»¤

*   `flow`ï¼šå¯åŠ¨äº¤äº’å¼ä¸»èœå•ã€‚
*   `flow ai`ï¼šç›´æ¥ä½¿ç”¨ AI ç”Ÿæˆå¹¶æäº¤ä»£ç ï¼ˆç­‰åŒäº `aicommits`ï¼‰ã€‚
*   `flow --help`ï¼šæŸ¥çœ‹å¸®åŠ©ä¿¡æ¯å’Œé˜¶æ®µè¯´æ˜ã€‚
*   `flow --version`ï¼šæŸ¥çœ‹å½“å‰ç‰ˆæœ¬ã€‚

## ğŸŒŠ å·¥ä½œæµé˜¶æ®µè¯¦è§£

### é˜¶æ®µ 0ï¼šAI æ™ºèƒ½æäº¤ (AI Smart Commit)

**ç›®æ ‡**ï¼šåˆ©ç”¨ AI è‡ªåŠ¨åˆ†ææš‚å­˜åŒºï¼ˆStagedï¼‰çš„ä»£ç å˜æ›´ï¼Œç”Ÿæˆç¬¦åˆè§„èŒƒçš„ Commit Messageï¼Œå‡å°‘äººå·¥ç¼–å†™æˆæœ¬ã€‚

**åº•å±‚èƒ½åŠ›**ï¼š
æœ¬åŠŸèƒ½åŸºäº [aicommits](https://github.com/Nutlope/aicommits) å°è£…ã€‚
*   å¦‚æœä¸å¸¦å‚æ•°è¿è¡Œ `flow ai`ï¼Œå°†è¿›å…¥**äº¤äº’æ¨¡å¼**ï¼Œæä¾›â€œç”Ÿæˆå¹¶å¤åˆ¶â€ã€â€œç”Ÿæˆå¹¶æäº¤â€ç­‰é€‰é¡¹ã€‚
*   å¦‚æœå¸¦å‚æ•°è¿è¡Œï¼ˆå¦‚ `flow ai -c -g 3`ï¼‰ï¼Œåˆ™ç›´æ¥é€ä¼ å‚æ•°ç»™ `aicommits`ã€‚

**é…ç½®æŒ‡å—**ï¼š
é¦–æ¬¡ä½¿ç”¨éœ€è¦é…ç½® API Keyã€‚æ¨èä½¿ç”¨ `flow ai setup` è¿›è¡Œäº¤äº’å¼é…ç½®ï¼Œæˆ–å‚è€ƒ `aicommits` æ–‡æ¡£è¿›è¡Œè¯¦ç»†é…ç½®ã€‚

**å…³é”®é…ç½®è¯´æ˜**ï¼š

ä¸ºäº†è·å¾—æœ€ä½³ä½“éªŒï¼Œå»ºè®®è¿›è¡Œä»¥ä¸‹é…ç½®ï¼š

1.  **æäº¤æ ¼å¼ (Type)**ï¼š
    *   å¦‚æœä¸é…ç½®ï¼Œé»˜è®¤å¯èƒ½åªæ˜¯ç®€å•çš„æè¿°ã€‚
    *   è‹¥éœ€ç”Ÿæˆç¬¦åˆ Conventional Commits è§„èŒƒï¼ˆå¦‚ `feat: add new feature`ï¼‰çš„æ¶ˆæ¯ï¼Œ**å¿…é¡»**æ‰§è¡Œï¼š
        ```bash
        flow ai config set type=conventional
        ```

2.  **è¯­è¨€è®¾ç½® (Locale)**ï¼š
    *   æ§åˆ¶ç”Ÿæˆæ¶ˆæ¯çš„è¯­è¨€ï¼ˆå¦‚ä¸­æ–‡æˆ–è‹±æ–‡ï¼‰ã€‚
    *   ä¾‹å¦‚è®¾ç½®ä¸ºè‹±æ–‡ï¼š
        ```bash
        flow ai config set locale=en
        ```
    *   è®¾ç½®ä¸ºä¸­æ–‡ï¼š
        ```bash
        flow ai config set locale=zh
        ```

3.  **ç”Ÿæˆæ•°é‡ (Generate)**ï¼š
    *   æ§åˆ¶æ¯æ¬¡ç”Ÿæˆçš„å¯é€‰æ¶ˆæ¯æ•°é‡ã€‚
    *   ä¾‹å¦‚æ¯æ¬¡ç”Ÿæˆ 3 æ¡ä¾›é€‰æ‹©ï¼š
        ```bash
        flow ai config set generate=3
        ```

> ğŸ’¡ **æç¤º**ï¼šæ‰€æœ‰ `flow ai` å¼€å¤´çš„é…ç½®å‘½ä»¤å®é™…ä¸Šéƒ½æ˜¯åœ¨è°ƒç”¨ `aicommits config`ã€‚æ›´å¤šé«˜çº§ç”¨æ³•è¯·æŸ¥é˜… [aicommits å®˜æ–¹æ–‡æ¡£](https://github.com/Nutlope/aicommits)ã€‚

### é˜¶æ®µ 1ï¼šç‰¹æ€§åŒæ­¥ (Feature Sync Pro)

**ç›®æ ‡**ï¼šå°†ä¸ªäººå¼€å‘åˆ†æ”¯ï¼ˆå¦‚ `feat/user-task-01`ï¼‰ä»¥**çº¿æ€§åŸå­æäº¤**çš„æ–¹å¼åˆå¹¶åˆ°å…¬å…±ç‰¹æ€§åˆ†æ”¯ï¼ˆå¦‚ `feat/1.0.0`ï¼‰ã€‚

1.  **å®‰å…¨æ£€æŸ¥**ï¼šç¡®è®¤å½“å‰åˆ†æ”¯ä¸ºç§æœ‰åˆ†æ”¯ï¼Œé˜²æ­¢è¯¯æ“ä½œå¤šäººåä½œåˆ†æ”¯ã€‚
2.  **è‡ªåŠ¨å˜åŸº (Rebase)**ï¼šæ‹‰å–ç›®æ ‡å…¬å…±åˆ†æ”¯æœ€æ–°ä»£ç ï¼Œå°†ä¸ªäººåˆ†æ”¯å˜åŸºåˆ°æœ€æ–°èŠ‚ç‚¹ï¼Œæ¶ˆé™¤å†²çªéšæ‚£ã€‚
3.  **æ™ºèƒ½å‹ç¼© (Smart Squash)**ï¼š
    *   æ£€æµ‹åˆ°å¤šæ¬¡æäº¤æ—¶ï¼Œè‡ªåŠ¨ä½¿ç”¨ `git reset --soft` å°†ç¢ç‰‡æäº¤å›é€€åˆ°æš‚å­˜åŒºã€‚
    *   å¼•å¯¼ç”¨æˆ·è¾“å…¥ Commit Messageï¼Œæ‰“åŒ…ä¸ºä¸€ä¸ªåŸå­æäº¤ã€‚
    *   ä¿ç•™ä¸ªäººåˆ†æ”¯å†å²ï¼Œæ”¯æŒåç»­ç»§ç»­å¼€å‘ï¼ˆæ— éœ€åˆ é™¤åˆ†æ”¯ï¼‰ã€‚
4.  **çº¿æ€§åˆå¹¶**ï¼šåˆ‡æ¢åˆ°å…¬å…±åˆ†æ”¯ï¼Œæ‰§è¡Œ Fast-forward åˆå¹¶ã€‚
5.  **æ¨é€ä¸æ¢å¤**ï¼šæ¨é€å…¬å…±åˆ†æ”¯åˆ°è¿œç¨‹ï¼Œå¹¶åˆ‡å›ä¸ªäººåˆ†æ”¯æ¢å¤å·¥ä½œçŠ¶æ€ã€‚

> ğŸ’¡ **ä¼˜åŠ¿**ï¼šæ—¢ä¿è¯äº†å…¬å…±å†å²çš„ç»å¯¹æ•´æ´ï¼ˆçº¿æ€§ï¼‰ï¼Œåˆé¿å…äº†ä¼ ç»Ÿ Squash Merge å¯¼è‡´çš„ä¸ªäººåˆ†æ”¯ä¸å…¬å…±åˆ†æ”¯å†å²æ–­å±‚é—®é¢˜ã€‚

### é˜¶æ®µ 2ï¼šé¢„å‘å¸ƒ (Pre-Release)

**ç›®æ ‡**ï¼šä»å…¬å…±ç‰¹æ€§åˆ†æ”¯å†»ç»“ä»£ç ï¼Œåˆ›å»º Release åˆ†æ”¯å‡†å¤‡å‘ç‰ˆã€‚

**è‡ªåŠ¨åŒ–æ­¥éª¤**ï¼š
1.  åŒæ­¥è¿œç¨‹åˆ†æ”¯ä¿¡æ¯ã€‚
2.  é€‰æ‹©æ¥æºçš„å…¬å…±ç‰¹æ€§åˆ†æ”¯ï¼ˆ`feat/*`ï¼‰ã€‚
3.  ç¡®å®šå‘å¸ƒç‰ˆæœ¬å·ï¼ˆæ”¯æŒ Major/Minor/Patch è‡ªåŠ¨è®¡ç®—ï¼‰ã€‚
4.  è‡ªåŠ¨åˆ›å»º release åˆ†æ”¯ï¼ˆå¦‚ `release/v1.0.0`ï¼‰ã€‚
5.  å°† release åˆ†æ”¯æ¨é€åˆ°è¿œç¨‹ã€‚

### é˜¶æ®µ 3ï¼šæ­£å¼å‘å¸ƒ (Release Finish)

**ç›®æ ‡**ï¼šå®Œæˆå‘å¸ƒæµç¨‹ï¼Œç”Ÿæˆ Changelog å¹¶æ‰“ Tagã€‚

**è‡ªåŠ¨åŒ–æ­¥éª¤**ï¼š
1.  è·å–è¿œç¨‹æ‰€æœ‰ release åˆ†æ”¯ã€‚
2.  é€‰æ‹©è¦å‘å¸ƒçš„ release åˆ†æ”¯ã€‚
3.  è°ƒç”¨ `standard-version` è‡ªåŠ¨ç”Ÿæˆ `CHANGELOG.md` å¹¶æ›´æ–°ç‰ˆæœ¬å·ã€‚
4.  è‡ªåŠ¨æ‰“ Git Tagã€‚
5.  æ¨é€åˆ†æ”¯å’Œ Tag åˆ°è¿œç¨‹ã€‚
6.  æç¤ºåç»­æ“ä½œï¼ˆå¦‚å‘èµ· Pull Request åˆå¹¶åˆ° masterï¼‰ã€‚

## ğŸ“¦ ä¾èµ–åº“

*   [aicommits](https://github.com/Nutlope/aicommits): AI è‡ªåŠ¨ç”Ÿæˆæäº¤ä¿¡æ¯ã€‚
*   [inquirer](https://www.npmjs.com/package/inquirer): äº¤äº’å¼å‘½ä»¤è¡Œç•Œé¢ã€‚
*   [execa](https://www.npmjs.com/package/execa): æ‰§è¡Œ Shell å‘½ä»¤ã€‚
*   [chalk](https://www.npmjs.com/package/chalk): ç»ˆç«¯è¾“å‡ºç€è‰²ã€‚
*   [semver](https://www.npmjs.com/package/semver): è¯­ä¹‰åŒ–ç‰ˆæœ¬å¤„ç†ã€‚
*   [standard-version](https://www.npmjs.com/package/standard-version): è‡ªåŠ¨åŒ–ç‰ˆæœ¬æ§åˆ¶å’Œ Changelog ç”Ÿæˆã€‚

## ğŸ“„ è®¸å¯è¯

ISC
